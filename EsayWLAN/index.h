
#ifndef INDEX_H
#define INDEX_H

String configPage = "<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta http-equiv='X-UA-Compatible'content='IE=edge'><meta name='viewport'content='width=device-width, initial-scale=1.0'><title>配置网络</title></head><style>*{padding:0;margin:0;font-family:'Microsoft YaHei',微软雅黑;color:#4b4b4b;user-select:none;-webkit-user-select:none;appearance:none;-webkit-appearance:none;transition:all.3s}body,html{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f3f3f3;overflow:hidden}span,hr,input{border-radius:10px}::placeholder{color:#d3d3d3}::-webkit-scrollbar{appearance:none;width:10px}::-webkit-scrollbar-thumb{background:#e6e6e6;border-radius:10px}#body{width:100%;height:100%;background:#ffffff;display:flex;align-items:center;flex-direction:column;position:relative}.reload::before{content:'';width:17px;height:17px;background:#62a1ff;position:absolute;border-radius:100%}.reload{width:45px;height:45px;position:absolute;top:0px;right:0px;background:#62a1ff;border-radius:0;border-bottom-left-radius:50%;display:flex;align-items:center;justify-content:center}.reload>hr::before{content:'';width:15px;height:10px;display:block;background:#62a1ff;position:absolute;top:18px;right:10px}.reload>hr::after{content:'';display:block;position:absolute;top:12px;right:10px;transform:rotate(10deg)scale(.8);border-bottom:10px solid#ffffff;border-left:10px solid transparent;transition:all.3s}.reload>hr{width:23px;height:23px;background:#ffffff;border-radius:100%;border:0}.list{width:100%;height:100%;display:flex;align-items:center;flex-direction:column;margin:20px;overflow-x:hidden}.data:hover{background:#f4f4f4}.data:hover>.data-lock>hr{background:#62a1ff}.data:hover>.data-lock>hr::before{background:#62a1ff}.data:hover>.data-lock>hr::after{background:#f4f4f4}.data:active>.data-lock>hr{background:#62a1ff}.data:active>.data-lock>hr::before{background:#62a1ff}.data:active>.data-lock>hr::after{background:#f4f4f4}.data{width:80%;padding:10px;font-size:18px;font-weight:bolder;display:flex;position:relative;margin-bottom:3px}.data-dbm{display:flex;align-items:center}.data-dbm>hr:nth-of-type(1){margin-left:2px}.data-dbm>hr:nth-of-type(2){height:60%;margin-top:5px}.data-dbm>hr:nth-of-type(3){height:45%;margin-top:8px;margin-right:10px}.data-dbm>hr{width:8px;height:80%;border:0;background:#62a1ff;margin-right:3px}.data-ssid-name{font-size:17px;color:#a5a5a5}.data-lock{right:12px;position:absolute;display:flex;align-items:center}.data-lock-icon::before{content:'';width:15px;height:15px;display:block;background:#e6e6e6;position:absolute;top:-1px;left:2px;border-radius:10px;transition:all.3s}.data-lock-icon::after{content:'';width:5px;height:5px;display:block;background:#ffffff;position:absolute;top:2px;left:7px;border-radius:10px;transition:all.3s}.data-lock-icon{width:20px;height:15px;border:0;background:#e6e6e6;margin-top:5px;border-radius:5px}.con{width:100%;height:100%;position:fixed;z-index:3;display:flex;align-items:center;justify-content:center;flex-direction:column;visibility:hidden;opacity:0}.con-mark{width:100%;height:100%;border:0px;border-radius:0;position:absolute;background:#ffffff}.con-body{width:100%;z-index:3;display:flex;align-items:center;justify-content:center;flex-direction:column}.con-body>input{border:0;outline:none}.ssid,.pwd{width:80%;height:24px;padding:10px;background:#f3f3f3;margin-bottom:15px;font-size:17px;font-weight:bolder;color:#a5a5a5;user-select:auto;-webkit-user-select:auto}.okey,.close{width:85%;height:44px;margin-bottom:15px;background:#62a1ff;color:white;font-size:15px}.close{background:#e6e6e6;color:#a7a7a7}.okey:active{background:#9dc4ff}.close:active{background:#f1f1f1}.loading{width:100%;height:100%;position:absolute;background:#ffffff;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:5;visibility:hidden;opacity:0}.loading-icon{display:flex;margin-bottom:50px}.loading-icon>hr:nth-of-type(1){margin-left:0}.loading-icon>hr:nth-of-type(2){animation-delay:.3s}.loading-icon>hr:nth-of-type(3){animation-delay:.6s}.loading-icon>hr:nth-of-type(4){animation-delay:.9s}.loading-icon>hr{width:30px;height:30px;background:#62a1ff;border:0;margin-left:10px;border-radius:100%;animation:2.3s loading infinite}.loading-true{width:100px;height:80px;display:flex;align-items:center;justify-content:center;background:#f3f3f3;margin-bottom:30px;position:absolute;transform:scale(0.001)}.loading-true>hr:nth-of-type(1){height:50px;transform:rotate(-35deg)}.loading-true>hr:nth-of-type(2){height:100px;transform:rotate(35deg);margin-left:8px;position:relative;top:-20px}.loading-true>hr{width:23px;background:#62a1ff;border:0}.loading-false{width:100px;height:80px;display:flex;align-items:center;justify-content:center;background:#f3f3f3;margin-bottom:30px;position:absolute;transform:scale(0.001)}.loading-false>hr:nth-of-type(1){height:100px;transform:rotate(-35deg);position:relative;top:-20px;left:10px}.loading-false>hr:nth-of-type(2){height:100px;transform:rotate(35deg);position:relative;top:-30px;left:-10px}.loading-false>hr{width:23px;background:#ff8c8c;border:0}.tips{font-size:17px;font-weight:bolder;color:#acacac}@-webkit-keyframes loading{0%{opacity:1}50%{opacity:0;margin-top:40px}100%{opacity:1}}</style><script>init=()=>{document.addEventListener('touchstart',function(){});reload=document.querySelector('.reload');num=document.querySelector('.num');list=document.querySelector('.list');con_box=document.querySelector('.con');con_body=document.querySelector('.con-body');ssid=document.querySelector('.ssid');pwd=document.querySelector('.pwd');okey=document.querySelector('.okey');cancel=document.querySelector('.close');mark=document.querySelector('.con-mark');loading=document.querySelector('.loading');loading_icon=document.querySelector('.loading-icon');loading_true=document.querySelector('.loading-true');loading_false=document.querySelector('.loading-false');tips=document.querySelector('.tips');inputing=false};window.onload=()=>{init();handle();resize();getdata()};handle=()=>{list.onmousemove=()=>{for(i=0;i<list.children.length;i++){list.children[i].onclick=function(){that=this.children[1];that.getAttribute('lock')==1?ss(pwd,'display: none'):ss(pwd,null);ssid.value=that.getAttribute('ssid');conbox()}}};okey.onclick=()=>{tips.innerText='连接中';loadingbox();fetch(`/ssidData?ssid=${ssid.value}&pwd=${pwd.value}`).then(res=>{return res.json()}).then(res=>{Boolean(res.status);res.status?constatus():constatus(false)}).catch(()=>{constatus(false,'发生错误，请重新操作 ( Error: 03 )')})};reload.onclick=()=>{tips.innerText='刷新中';getnewdata();loadingbox()};cancel.onclick=()=>conbox(false);mark.onclick=()=>conbox(false)};resize=()=>{x=document.documentElement.clientWidth;if(x>600){inputing?ss(body,`${body.getAttribute('style')}width:410px;height:80%;border-radius:20px;`)&ss(reload,'border-top-right-radius: 50%;'):ss(body,'width: 410px;height: 80%;border-radius: 20px;')&ss(reload,'border-top-right-radius: 50%;');ss(con_body,'width: 400px;')}else{ss(body,null);ss(con_body,null);ss(reload,null)}};getnewdata=(type=true)=>{fetch('/getNewData').then(res=>{return res.json()}).then(res=>{Boolean(res[0].end)?getnewdata(false):null;create(res);type?loadingbox(false):null}).catch(()=>{constatus(false,'发生错误，请重新操作 ( Error: 02 )')})};getdata=()=>{fetch('/getData').then(res=>{return res.json()}).then(res=>{create(res)}).catch(()=>{constatus(false,'发生错误，请重新操作 ( Error: 01 )')})};conbox=(type=true)=>{if(type)ss(con_box,'visibility: visible;opacity: 1;'),ss(body,`${body.getAttribute('style')}filter:blur(50px);`),inputing=true,pwd.value=null,condisable(false);else ss(con_box,'visibility: hidden;opacity: 0;transition: all 0.1s'),ss(body,`${body.getAttribute('style')}filter:none;`),inputing=false,condisable()};condisable=(type=true)=>{if(type)ssid.disabled=true,pwd.disabled=true,okey.disabled=true,close.disabled=true;else ssid.disabled=false,pwd.disabled=false,okey.disabled=false,close.disabled=false};constatus=(type=true,text=null)=>{if(type){tips.innerText='连接成功';ss(loading_icon,'transform: scale(0.001);display:none;');ss(loading_true,'transform: scale(1.2);position: relative;')}else{text==null?tips.innerText='连接失败, 请重试':tips.innerText=text;ss(loading_icon,'transform: scale(0.001);display:none;');ss(loading_false,'transform: scale(1.2);position: relative;');conbox(false);getnewdata(false);setTimeout(()=>{loadingbox(false);setTimeout(()=>{ss(loading_false,null);ss(loading_icon,null)},500)},3000)}};create=(data)=>{data.splice(-1,1);list.innerHTML=null;num.innerHTML=`附近&nbsp;WLAN&nbsp;﹝${data.length}﹞`;data.forEach(item=>{let box=document.createElement('span');let dbmbox=document.createElement('span');let icon1=document.createElement('hr');let icon2=document.createElement('hr');let icon3=document.createElement('hr');let name=document.createElement('p');let lockbox=document.createElement('span');let lockicon=document.createElement('hr');box.setAttribute('class','data');dbmbox.setAttribute('class','data-dbm');name.setAttribute('class','data-ssid-name');lockbox.setAttribute('class','data-lock');lockicon.setAttribute('class','data-lock-icon');dbmbox.appendChild(icon1);dbmbox.appendChild(icon2);dbmbox.appendChild(icon3);item.dbm=Math.abs(Number(item.dbm));if(item.dbm>=50)ss(icon3,'background: #d3d3d3;');if(item.dbm>=75)ss(icon3,'background: #d3d3d3;'),ss(icon2,'background: #d3d3d3;');if(item.dbm>=95)ss(icon3,'background: #d3d3d3;'),ss(icon2,'background: #d3d3d3;'),ss(icon1,'background: #d3d3d3;');item.ssid.length>14?name.innerText=`${item.ssid.substring(14,0)}...`:name.innerText=item.ssid;name.setAttribute('ssid',item.ssid);name.setAttribute('lock',item.type);lockbox.appendChild(lockicon);box.appendChild(dbmbox);box.appendChild(name);item.type==0?box.appendChild(lockbox):null;list.appendChild(box)})};loadingbox=(type=true)=>type?ss(loading,'visibility: visible;opacity: 1'):ss(loading,'visibility: hidden;opacity: 0');ss=(object,style)=>object.style.cssText=style;window.onresize=resize;</script><body><div id='body'><h1 class='num'style='font-size:21px;margin-top:30px;margin-bottom: 10px;'>附近&nbsp;WLAN</h1><span class='reload'><hr></span><div class='list'></div><p style='margin-bottom:20px;color:#bebebe;'>动凡科技™&nbsp;&nbsp;提供技术支持</p></div><div class='con'><hr class='con-mark'><h1 style='font-size:21px;z-index:3;position: relative;top: -40px;'>连接&nbsp;WLAN</h1><div class='con-body'><input class='ssid'type='text'placeholder='账号'><input class='pwd'type='text'placeholder='密码'><input class='okey'type='button'value='确认'><input class='close'type='button'value='取消'></div></div><div class='loading'><span class='loading-icon'><hr><hr><hr><hr></span><span class='loading-true'><hr><hr></span><span class='loading-false'><hr><hr></span><p class='tips'></p></div></body></html>";

#endif